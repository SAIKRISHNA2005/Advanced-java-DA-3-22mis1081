<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:composition template="/templates/layout.xhtml">
        <ui:define name="title">Payment Confirmation</ui:define>
        
        <ui:define name="content">
            <f:metadata>
                <f:viewParam name="paymentId" value="#{paymentBean.paymentId}"/>
                <f:event type="preRenderView" listener="#{paymentBean.loadPaymentConfirmation}"/>
            </f:metadata>

            <ui:fragment rendered="#{not empty studentBean.currentStudent}">
                <ui:fragment rendered="#{not empty paymentBean.confirmedPayment}">
                    <div class="card" style="max-width: 700px; margin: 20px auto; text-align: center;">
                    <div style="font-size: 5rem; margin-bottom: 20px;">âœ…</div>
                    <h1 style="color: var(--success-color) !important; margin-bottom: 20px;">Payment Successful!</h1>
                    
                    <div class="detail-section" style="margin: 30px 0; text-align: left;">
                        <h3 style="color: #333 !important; text-align: center; margin-bottom: 20px;">Enrollment Confirmation</h3>
                        
                        <div class="detail-row">
                            <span class="detail-label" style="color: #555 !important;">Course Name:</span>
                            <span class="detail-value" style="color: #333 !important; font-weight: 600;">#{paymentBean.confirmedPayment.course.courseName}</span>
                        </div>
                        
                        <div class="detail-row">
                            <span class="detail-label" style="color: #555 !important;">Instructor:</span>
                            <span class="detail-value" style="color: #333 !important;">#{paymentBean.confirmedPayment.course.instructor}</span>
                        </div>
                        
                        <div class="detail-row">
                            <span class="detail-label" style="color: #555 !important;">Amount Paid:</span>
                            <span class="detail-value" style="color: var(--success-color) !important; font-weight: bold; font-size: 1.2rem;">â‚¹#{paymentBean.confirmedPayment.amount}</span>
                        </div>
                        
                        <div class="detail-row">
                            <span class="detail-label" style="color: #555 !important;">Payment Method:</span>
                            <span class="detail-value" style="color: #333 !important;">#{paymentBean.confirmedPayment.paymentMethod}</span>
                        </div>
                        
                        <div class="detail-row">
                            <span class="detail-label" style="color: #555 !important;">Transaction ID:</span>
                            <span class="detail-value" style="color: #333 !important; font-family: monospace;">#{paymentBean.confirmedPayment.transactionId}</span>
                        </div>
                        
                        <div class="detail-row">
                            <span class="detail-label" style="color: #555 !important;">Payment Date:</span>
                            <span class="detail-value" style="color: #333 !important;">#{paymentBean.formatDateTime(paymentBean.confirmedPayment.paymentDate)}</span>
                        </div>
                        
                        <div class="detail-row">
                            <span class="detail-label" style="color: #555 !important;">Status:</span>
                            <span class="detail-value">
                                <span class="status status-active">#{paymentBean.confirmedPayment.status}</span>
                            </span>
                        </div>
                    </div>

                    <div style="background: #d4edda; padding: 20px; border-radius: 10px; margin: 30px 0;">
                        <p style="color: #155724; font-size: 1.1rem; font-weight: 600; margin: 0;">
                            ðŸŽ‰ You have been successfully enrolled in <strong>#{paymentBean.confirmedPayment.course.courseName}</strong>!
                        </p>
                    </div>

                    <div style="margin-top: 30px;">
                        <h:form>
                            <h:commandButton value="Go to Dashboard" action="dashboard" 
                                            styleClass="button button-success button-large" 
                                            style="margin: 10px;"/>
                            <h:commandButton value="Browse More Courses" action="courseList" 
                                            styleClass="button button-outline" 
                                            style="margin: 10px; color: var(--primary-color) !important; border-color: var(--primary-color) !important;"/>
                        </h:form>
                    </div>
                    </div>
                </ui:fragment>

                <ui:fragment rendered="#{empty paymentBean.confirmedPayment}">
                    <div class="card" style="max-width: 700px; margin: 20px auto; text-align: center;">
                        <div class="empty-state">
                            <p style="font-size: 1.2rem; color: #666 !important;">Payment information not found</p>
                            <p style="color: #999 !important; margin-top: 10px;">Unable to load payment confirmation details.</p>
                            <h:form>
                                <h:commandButton value="Go to Dashboard" action="dashboard" 
                                                styleClass="button" style="margin-top: 20px;"/>
                            </h:form>
                        </div>
                    </div>
                </ui:fragment>
            </ui:fragment>

            <ui:fragment rendered="#{empty studentBean.currentStudent}">
                <div class="card" style="max-width: 700px; margin: 20px auto; text-align: center;">
                    <div class="empty-state">
                        <p style="font-size: 1.2rem; color: #666 !important;">Please login to view payment confirmation</p>
                        <p style="color: #999 !important; margin-top: 10px;">You need to be logged in to view payment details.</p>
                        <h:form>
                            <h:commandButton value="Go to Login" action="home" 
                                            styleClass="button" style="margin-top: 20px;"/>
                        </h:form>
                    </div>
                </div>
            </ui:fragment>
        </ui:define>
    </ui:composition>

</html>

